<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="大里振坤宮委員會北部二日自強活動。暢遊羅浮溫泉、彩虹吊橋、角板山、石門水庫、台塑文物館、好望角風車，體驗桃園與苗栗山海風光。2025年12月13-14日出發。">
    <meta property="og:title" content="大里振坤宮委員會自強活動 - 北部二日遊">
    <meta property="og:description"
        content="大里振坤宮委員會北部二日自強活動。暢遊羅浮溫泉、彩虹吊橋、角板山、石門水庫、台塑文物館、好望角風車，體驗桃園與苗栗山海風光。2025年12月13-14日出發。">
    <meta property="og:image"
        content="https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?q=80&w=800&auto=format&fit=crop">
    <meta property="og:type" content="website">
    <title>大里振坤宮委員會自強活動 - 北部二日遊</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* Custom Scrollbar hide */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        .fade-enter-active,
        .fade-leave-active {
            transition: opacity 0.3s ease;
        }

        .fade-enter-from,
        .fade-leave-to {
            opacity: 0;
        }

        .slide-up-enter-active,
        .slide-up-leave-active {
            transition: transform 0.3s ease-out;
        }

        .slide-up-enter-from,
        .slide-up-leave-to {
            transform: translateY(100%);
        }
    </style>
</head>

<body class="bg-gray-100">

    <div id="app" class="max-w-md mx-auto bg-[#fdfbf7] h-[100dvh] relative shadow-2xl overflow-hidden flex flex-col">

        <!-- Hero Banner -->
        <header class="relative h-48 w-full flex-shrink-0">
            <div class="absolute inset-0 bg-black/30 z-10"></div>
            <img :src="heroImageSrc" @error="handleHeroError"
                class="w-full h-full object-cover transition-opacity duration-500" alt="Hero Image">
            <div class="absolute bottom-4 left-4 z-20 text-white">
                <p class="text-sm font-light tracking-wider opacity-90 mb-1">2025.12.13 - 12.14</p>
                <h1 class="text-2xl font-bold leading-tight">大里振坤宮<br>委員會自強活動</h1>
                <p class="text-xs mt-2 inline-block bg-orange-500 px-2 py-0.5 rounded text-white font-medium">北部二日遊</p>
            </div>
        </header>

        <!-- Main Content Area -->
        <main ref="mainContent" class="flex-1 overflow-y-auto pb-24 no-scrollbar pt-4 px-4">

            <!-- Day 1 List -->
            <div v-if="currentTab === 'day1'" class="space-y-4">
                <div class="flex items-center space-x-2 mb-2">
                    <span class="bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded">Day 1</span>
                    <h2 class="text-gray-800 font-bold text-lg">桃園精華區巡禮</h2>
                </div>

                <div v-for="(item, index) in itinerary.day1" :key="'d1-'+index" @click="openModal(item)"
                    class="bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden cursor-pointer active:scale-95 group">
                    <div class="h-32 w-full overflow-hidden relative">
                        <img :src="item.currentImage" @error="(e) => handleItemImageError(e, item)"
                            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"
                            :alt="item.title">
                        <div
                            class="absolute top-2 left-2 bg-black/60 text-white text-xs px-2 py-1 rounded backdrop-blur-sm">
                            {{ item.time }}
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-bold text-gray-800 text-lg mb-1 flex items-center justify-between">
                            {{ item.title }}
                            <i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i>
                        </h3>
                        <p class="text-gray-500 text-sm line-clamp-1">{{ item.desc }}</p>
                        <div class="mt-3 flex gap-2">
                            <span v-if="item.tags" v-for="tag in item.tags"
                                class="text-[10px] px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full">
                                {{ tag }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Day 2 List -->
            <div v-if="currentTab === 'day2'" class="space-y-4">
                <div class="flex items-center space-x-2 mb-2">
                    <span class="bg-green-600 text-white text-xs font-bold px-2 py-1 rounded">Day 2</span>
                    <h2 class="text-gray-800 font-bold text-lg">文化體驗與海景風光</h2>
                </div>

                <div v-for="(item, index) in itinerary.day2" :key="'d2-'+index" @click="openModal(item)"
                    class="bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden cursor-pointer active:scale-95 group">
                    <div class="h-32 w-full overflow-hidden relative">
                        <img :src="item.currentImage" @error="(e) => handleItemImageError(e, item)"
                            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"
                            :alt="item.title">
                        <div
                            class="absolute top-2 left-2 bg-black/60 text-white text-xs px-2 py-1 rounded backdrop-blur-sm">
                            {{ item.time }}
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="font-bold text-gray-800 text-lg mb-1 flex items-center justify-between">
                            {{ item.title }}
                            <i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i>
                        </h3>
                        <p class="text-gray-500 text-sm line-clamp-1">{{ item.desc }}</p>
                        <div class="mt-3 flex gap-2">
                            <span v-if="item.tags" v-for="tag in item.tags"
                                class="text-[10px] px-2 py-0.5 bg-gray-100 text-gray-600 rounded-full">
                                {{ tag }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Info Tab -->
            <div v-if="currentTab === 'info'" class="space-y-4">
                <h2 class="text-gray-800 font-bold text-xl px-2">活動資訊</h2>

                <div class="bg-white rounded-xl p-5 shadow-sm space-y-4">
                    <div class="flex items-start gap-3">
                        <div class="p-2 bg-orange-100 rounded-full text-orange-600">
                            <i data-lucide="calendar"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-800">活動日期</h4>
                            <p class="text-sm text-gray-600">2025年12月13日(六) - 12月14日(日)</p>
                        </div>
                    </div>

                    <div class="flex items-start gap-3">
                        <div class="p-2 bg-blue-100 rounded-full text-blue-600">
                            <i data-lucide="map-pin"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-gray-800">集合地點</h4>
                            <p class="text-sm text-gray-600">振坤宮停車場</p>
                            <p class="text-xs text-red-500 mt-1">07:00 集合，07:20 準時出發</p>
                        </div>
                    </div>

                </div>

                <div class="bg-blue-50 border border-blue-100 rounded-xl p-4">
                    <h4 class="font-bold text-blue-800 mb-2 flex items-center gap-2">
                        <i data-lucide="info" class="w-4 h-4"></i> 注意事項
                    </h4>
                    <ul class="text-sm text-blue-900 space-y-1 list-disc list-inside opacity-80">
                        <li>請攜帶健保卡、個人藥品。</li>
                        <li>穿著輕便服裝及好走的鞋子。</li>
                        <li>山區早晚溫差大，請備薄外套。</li>
                        <li>車上備有卡拉OK，歡迎點歌。</li>
                    </ul>
                </div>
            </div>

        </main>

        <!-- Bottom Navigation -->
        <nav
            class="absolute bottom-0 w-full bg-white border-t border-gray-100 shadow-[0_-5px_15px_rgba(0,0,0,0.05)] pb-safe pt-2 z-40">
            <div class="flex justify-around items-center h-14">
                <button @click="switchTab('day1')"
                    class="flex flex-col items-center justify-center w-1/3 transition-colors duration-200"
                    :class="currentTab === 'day1' ? 'text-blue-600' : 'text-gray-400'">
                    <i data-lucide="calendar-days" :class="currentTab === 'day1' ? 'stroke-[2.5px]' : 'stroke-2'"></i>
                    <span class="text-[10px] font-medium mt-1">12/13 第一天</span>
                </button>

                <button @click="switchTab('day2')"
                    class="flex flex-col items-center justify-center w-1/3 transition-colors duration-200"
                    :class="currentTab === 'day2' ? 'text-green-600' : 'text-gray-400'">
                    <i data-lucide="mountain-snow" :class="currentTab === 'day2' ? 'stroke-[2.5px]' : 'stroke-2'"></i>
                    <span class="text-[10px] font-medium mt-1">12/14 第二天</span>
                </button>

                <button @click="switchTab('info')"
                    class="flex flex-col items-center justify-center w-1/3 transition-colors duration-200"
                    :class="currentTab === 'info' ? 'text-orange-500' : 'text-gray-400'">
                    <i data-lucide="info" :class="currentTab === 'info' ? 'stroke-[2.5px]' : 'stroke-2'"></i>
                    <span class="text-[10px] font-medium mt-1">旅遊資訊</span>
                </button>
            </div>
            <!-- Safe Area for iPhone Home Indicator -->
            <div class="h-5 w-full bg-white"></div>
        </nav>

        <!-- Modal -->
        <transition name="fade">
            <div v-if="isModalOpen"
                class="fixed inset-0 z-50 flex items-end sm:items-center justify-center pointer-events-none">
                <!-- Backdrop -->
                <div @click="closeModal" class="absolute inset-0 bg-black/50 pointer-events-auto backdrop-blur-sm">
                </div>

                <!-- Content -->
                <transition name="slide-up" appear>
                    <div v-if="isModalOpen"
                        class="bg-white w-full max-w-md max-h-[90vh] overflow-y-auto rounded-t-2xl sm:rounded-2xl pointer-events-auto relative shadow-2xl flex flex-col pb-8">

                        <!-- Header Image -->
                        <div class="h-48 w-full relative flex-shrink-0">
                            <img :src="selectedItem.currentImage" class="w-full h-full object-cover" alt="Detail Image">
                            <button @click="closeModal"
                                class="absolute top-4 right-4 bg-black/40 hover:bg-black/60 text-white rounded-full p-2 backdrop-blur-md transition-colors">
                                <i data-lucide="x" class="w-5 h-5"></i>
                            </button>
                            <div
                                class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 pt-12">
                                <span
                                    class="bg-orange-500 text-white text-[10px] font-bold px-2 py-0.5 rounded mb-1 inline-block">
                                    {{ selectedItem.time }}
                                </span>
                                <h2 class="text-white text-xl font-bold">{{ selectedItem.title }}</h2>
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="p-6 space-y-6">

                            <!-- Description -->
                            <div>
                                <h3
                                    class="text-sm font-bold text-gray-400 uppercase tracking-wider mb-2 flex items-center gap-2">
                                    <i data-lucide="file-text" class="w-4 h-4"></i> 景點介紹
                                </h3>
                                <p class="text-gray-700 leading-relaxed text-sm">{{ selectedItem.desc }}</p>
                            </div>

                            <!-- Tips -->
                            <div v-if="selectedItem.tips" class="bg-yellow-50 p-4 rounded-xl border border-yellow-100">
                                <h3 class="text-sm font-bold text-yellow-700 mb-1 flex items-center gap-2">
                                    <i data-lucide="lightbulb" class="w-4 h-4"></i> 貼心小撇步
                                </h3>
                                <p class="text-sm text-yellow-800 opacity-90">{{ selectedItem.tips }}</p>
                            </div>

                            <!-- Extra Info Grid -->
                            <div class="grid grid-cols-2 gap-4">
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <div class="flex items-center gap-2 mb-1 text-gray-500">
                                        <i data-lucide="clock" class="w-3 h-3"></i>
                                        <span class="text-xs">停留時間</span>
                                    </div>
                                    <p class="text-sm font-medium text-gray-800">{{ selectedItem.extra.duration ||
                                        '視情況而定' }}</p>
                                </div>
                                <div class="bg-gray-50 p-3 rounded-lg">
                                    <div class="flex items-center gap-2 mb-1 text-gray-500">
                                        <i data-lucide="ticket" class="w-3 h-3"></i>
                                        <span class="text-xs">門票資訊</span>
                                    </div>
                                    <p class="text-sm font-medium text-gray-800">{{ selectedItem.extra.ticket }}</p>
                                </div>
                            </div>

                            <!-- Clothes & Transport -->
                            <div class="space-y-3">
                                <div class="flex items-start gap-3 text-sm">
                                    <i data-lucide="shirt" class="w-4 h-4 text-blue-500 mt-0.5"></i>
                                    <div>
                                        <span class="font-bold text-gray-700">穿著建議：</span>
                                        <span class="text-gray-600">{{ selectedItem.extra.clothes }}</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Button -->
                            <a :href="selectedItem.map" target="_blank"
                                class="flex items-center justify-center gap-2 w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-colors shadow-lg shadow-blue-200 mt-4">
                                <i data-lucide="navigation" class="w-5 h-5"></i>
                                導航前往
                            </a>
                        </div>
                    </div>
                </transition>
            </div>
        </transition>

    </div>

    <script>
        const { createApp, ref, onMounted, onUpdated, nextTick } = Vue;

        const fallbackImages = [
            'https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?q=80&w=800&auto=format&fit=crop', // Travel
            'https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?q=80&w=800&auto=format&fit=crop', // Nature
            'https://images.unsplash.com/photo-1501785888041-af3ef285b470?q=80&w=800&auto=format&fit=crop', // Lake
            'https://images.unsplash.com/photo-1533240332313-0dbdd31c99a3?q=80&w=800&auto=format&fit=crop'  // Bridge
        ];

        const defaultApp = {
            setup() {
                const currentTab = ref('day1');
                const mainContent = ref(null);
                const isModalOpen = ref(false);
                const selectedItem = ref({});
                const heroImageSrc = ref('https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?q=80&w=800&auto=format&fit=crop'); // Mountains
                let heroFallbackIndex = 0;

                // Data Initialization
                const itinerary = ref({
                    day1: [
                        {
                            time: "07:00",
                            title: "振坤宮集合出發",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1542640244-7e67286feb8f?q=80&w=800&auto=format&fit=crop", // Temple/Tradition
                                "https://images.unsplash.com/photo-1505569127510-bde15360d9f6?q=80&w=800&auto=format&fit=crop"
                            ],
                            currentImage: "https://images.unsplash.com/photo-1542640244-7e67286feb8f?q=80&w=800&auto=format&fit=crop",
                            desc: "各位委員早安！請於振坤宮停車場集合，我們將於 07:20 準時發車前往桃園。",
                            tips: "請確認是否有攜帶身分證件與健保卡。",
                            tags: ["集合", "出發"],
                            extra: {
                                clothes: "舒適便服",
                                duration: "20分鐘",
                                ticket: "無"
                            },
                            map: "https://maps.google.com/?q=台中大里振坤宮"
                        },
                        {
                            time: "上午",
                            title: "羅浮泰雅溫泉公園",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1572290747447-0624a04d265f?q=80&w=800&auto=format&fit=crop", // Foot bath / hot spring vibe
                                "https://images.unsplash.com/photo-1627916607164-7b70243b9427?q=80&w=800&auto=format&fit=crop"
                            ],
                            currentImage: "https://images.unsplash.com/photo-1572290747447-0624a04d265f?q=80&w=800&auto=format&fit=crop",
                            desc: "體驗泰雅原鄉文化，園區內設有免費泡腳池，讓大家舒緩身心，享受天然暖湯。",
                            tips: "建議攜帶小毛巾擦拭雙腳。",
                            tags: ["溫泉", "泡腳", "泰雅文化"],
                            extra: {
                                clothes: "方便捲褲管的褲子",
                                duration: "40分鐘",
                                ticket: "免費泡腳"
                            },
                            map: "https://maps.google.com/?q=羅浮泰雅溫泉公園"
                        },
                        {
                            time: "上午",
                            title: "羅浮彩虹吊橋",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1544473244-f6895e672d1a?q=80&w=800&auto=format&fit=crop", // Suspension bridge
                                "https://images.unsplash.com/photo-1506158669146-619067262a00?q=80&w=800&auto=format&fit=crop"
                            ],
                            currentImage: "https://images.unsplash.com/photo-1544473244-f6895e672d1a?q=80&w=800&auto=format&fit=crop",
                            desc: "全長200公尺的紅色吊橋，橫跨大漢溪，視野開闊，是欣賞河谷美景的最佳地點。",
                            tips: "橋上風大，帽子請抓牢。",
                            tags: ["吊橋", "美景"],
                            extra: {
                                clothes: "好走的鞋",
                                duration: "30分鐘",
                                ticket: "免費"
                            },
                            map: "https://maps.google.com/?q=羅浮彩虹吊橋"
                        },
                        {
                            time: "12:00",
                            title: "午餐：紅橋餐廳",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1550966871-3ed3c47e2ce2?q=80&w=800&auto=format&fit=crop", // Chinese food
                                "https://images.unsplash.com/photo-1563245372-f21724e3856d?q=80&w=800&auto=format&fit=crop"
                            ],
                            currentImage: "https://images.unsplash.com/photo-1550966871-3ed3c47e2ce2?q=80&w=800&auto=format&fit=crop",
                            desc: "享用在地風味合菜，補充體力。",
                            tips: "用餐請留意隨身物品。",
                            tags: ["午餐", "合菜"],
                            extra: {
                                clothes: "輕鬆",
                                duration: "1小時",
                                ticket: "團體安排"
                            },
                            map: "https://maps.google.com/?q=桃園紅橋餐廳"
                        },
                        {
                            time: "下午",
                            title: "角板山形象商圈",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1596395816999-55682054238e?q=80&w=800&auto=format&fit=crop", // Garden/Park
                                "https://images.unsplash.com/photo-1588863619561-8b0101b0f69a?q=80&w=800&auto=format&fit=crop"
                            ],
                            currentImage: "https://images.unsplash.com/photo-1596395816999-55682054238e?q=80&w=800&auto=format&fit=crop",
                            desc: "參觀蔣公行館、戰備秘道及後花園。商圈內有許多在地特產，如香菇、水蜜桃製品。",
                            tips: "戰備秘道階梯較多，請留意腳步。",
                            tags: ["歷史", "行館", "伴手禮"],
                            extra: {
                                clothes: "休閒鞋",
                                duration: "1.5小時",
                                ticket: "免費"
                            },
                            map: "https://maps.google.com/?q=角板山形象商圈"
                        },
                        {
                            time: "下午",
                            title: "石門水庫阿姆坪碼頭",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1566321741160-5a39626359eb?q=80&w=800&auto=format&fit=crop", // Boat/Lake
                                "https://images.unsplash.com/photo-1504280390367-361c6d9f38f4?q=80&w=800&auto=format&fit=crop"
                            ],
                            currentImage: "https://images.unsplash.com/photo-1566321741160-5a39626359eb?q=80&w=800&auto=format&fit=crop",
                            desc: "搭乘遊艇環湖，欣賞石門水庫風光，並登上有「迷你長江三峽」之稱的薑母島。",
                            tips: "乘船時請穿著救生衣，注意安全。",
                            tags: ["遊湖", "薑母島"],
                            extra: {
                                clothes: "防風外套",
                                duration: "1.5小時",
                                ticket: "團體票"
                            },
                            map: "https://maps.google.com/?q=阿姆坪碼頭"
                        },
                        {
                            time: "18:00",
                            title: "晚餐：自己人餐廳",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1505935428862-770b6f24f629?q=80&w=800&auto=format&fit=crop", // Dinner
                            ],
                            currentImage: "https://images.unsplash.com/photo-1505935428862-770b6f24f629?q=80&w=800&auto=format&fit=crop",
                            desc: "品嚐桃園在地知名客家料理，菜色豐富，口味地道。",
                            tips: "",
                            tags: ["晚餐", "客家菜"],
                            extra: {
                                clothes: "輕鬆",
                                duration: "1小時",
                                ticket: "含餐"
                            },
                            map: "https://maps.google.com/?q=桃園自己人餐廳"
                        },
                        {
                            time: "住宿",
                            title: "桃園龜山悅徠飯店",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1566073771259-6a8506099945?q=80&w=800&auto=format&fit=crop", // Hotel
                                "https://images.unsplash.com/photo-1611892440504-42a792e24d32?q=80&w=800&auto=format&fit=crop"
                            ],
                            currentImage: "https://images.unsplash.com/photo-1566073771259-6a8506099945?q=80&w=800&auto=format&fit=crop",
                            desc: "晚上自由活動，飯店內備有卡拉OK設備，歡迎大家高歌一曲。",
                            tips: "記得向櫃檯索取WiFi密碼。",
                            tags: ["住宿", "卡拉OK"],
                            extra: {
                                clothes: "室內拖鞋",
                                duration: "過夜",
                                ticket: "已訂房"
                            },
                            map: "https://maps.google.com/?q=桃園龜山悅徠飯店"
                        }
                    ],
                    day2: [
                        {
                            time: "08:00",
                            title: "飯店早餐 / 出發",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1525351463953-d233ce6369dc?q=80&w=800&auto=format&fit=crop", // Breakfast
                            ],
                            currentImage: "https://images.unsplash.com/photo-1525351463953-d233ce6369dc?q=80&w=800&auto=format&fit=crop",
                            desc: "享用飯店早餐後辦理退房，準備前往今日的第一個景點。",
                            tips: "請檢查行李是否遺漏。",
                            tags: ["早餐", "退房"],
                            extra: {
                                clothes: "輕鬆",
                                duration: "1小時",
                                ticket: "含餐"
                            },
                            map: "https://maps.google.com/?q=桃園龜山悅徠飯店"
                        },
                        {
                            time: "上午",
                            title: "林口台塑企業文物館",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1554907984-15263bfd63bd?q=80&w=800&auto=format&fit=crop", // Museum vibe
                                "https://images.unsplash.com/photo-1566127444979-b3d2b654e3d7?q=80&w=800&auto=format&fit=crop"
                            ],
                            currentImage: "https://images.unsplash.com/photo-1554907984-15263bfd63bd?q=80&w=800&auto=format&fit=crop",
                            desc: "深入了解台塑企業的發展歷史與企業文化，館藏豐富，極具教育意義。",
                            tips: "館內請勿大聲喧嘩。",
                            tags: ["文物館", "室內"],
                            extra: {
                                clothes: "舒適",
                                duration: "1小時50分",
                                ticket: "免費"
                            },
                            map: "https://maps.google.com/?q=台塑企業文物館"
                        },
                        {
                            time: "12:00",
                            title: "午餐：石園餐廳",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1583394838336-acd977736f90?q=80&w=800&auto=format&fit=crop", // Fish dish
                            ],
                            currentImage: "https://images.unsplash.com/photo-1583394838336-acd977736f90?q=80&w=800&auto=format&fit=crop",
                            desc: "來到石門水庫必吃的活魚三吃！品嚐鮮嫩的魚肉料理。",
                            tips: "魚刺請小心。",
                            tags: ["午餐", "活魚三吃"],
                            extra: {
                                clothes: "輕鬆",
                                duration: "1小時",
                                ticket: "團體安排"
                            },
                            map: "https://maps.google.com/?q=石園餐廳"
                        },
                        {
                            time: "下午",
                            title: "龍潭三坑自然生態公園",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1585016495481-91613a3ab1bc?q=80&w=800&auto=format&fit=crop", // Park/Lake
                                "https://images.unsplash.com/photo-1447752875215-b2761acb3c5d?q=80&w=800&auto=format&fit=crop"
                            ],
                            currentImage: "https://images.unsplash.com/photo-1585016495481-91613a3ab1bc?q=80&w=800&auto=format&fit=crop",
                            desc: "擁有廣大的綠地與湖光山色，環境清幽，適合散步拍照，享受大自然的芬多精。",
                            tips: "湖邊濕滑請小心。",
                            tags: ["生態", "公園", "散步"],
                            extra: {
                                clothes: "好走的鞋",
                                duration: "1小時20分",
                                ticket: "免費"
                            },
                            map: "https://maps.google.com/?q=三坑自然生態公園"
                        },
                        {
                            time: "下午",
                            title: "後龍好望角大風車",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1466611653911-95081537e5b7?q=80&w=800&auto=format&fit=crop", // Windmill
                                "https://images.unsplash.com/photo-1516653980844-c6820de8e908?q=80&w=800&auto=format&fit=crop"
                            ],
                            currentImage: "https://images.unsplash.com/photo-1466611653911-95081537e5b7?q=80&w=800&auto=format&fit=crop",
                            desc: "站在高處眺望台灣海峽，巨大的白色風力發電機就在眼前轉動，景色壯觀。",
                            tips: "海邊風非常大，建議穿著防風衣物。",
                            tags: ["海景", "風車"],
                            extra: {
                                clothes: "防風保暖",
                                duration: "40分鐘",
                                ticket: "免費"
                            },
                            map: "https://maps.google.com/?q=後龍好望角"
                        },
                        {
                            time: "晚餐",
                            title: "苗栗：龍華美食",
                            imageIndex: 0,
                            images: [
                                "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?q=80&w=800&auto=format&fit=crop", // Food
                            ],
                            currentImage: "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?q=80&w=800&auto=format&fit=crop",
                            desc: "享用美味的客家風味晚餐，為兩天的旅程畫下完美句點。",
                            tips: "",
                            tags: ["晚餐", "客家菜"],
                            extra: {
                                clothes: "輕鬆",
                                duration: "1小時",
                                ticket: "含餐"
                            },
                            map: "https://maps.google.com/?q=苗栗龍華小吃"
                        }
                    ]
                });

                // Methods
                const switchTab = (tab) => {
                    if (currentTab.value === tab) return;

                    // Reset scroll for both container and window
                    if (mainContent.value) mainContent.value.scrollTop = 0;
                    window.scrollTo(0, 0);

                    currentTab.value = tab;

                    // Double check after render
                    nextTick(() => {
                        if (mainContent.value) mainContent.value.scrollTop = 0;
                        window.scrollTo(0, 0);
                    });
                };

                const openModal = (item) => {
                    selectedItem.value = item;
                    isModalOpen.value = true;
                    nextTick(() => {
                        lucide.createIcons();
                    });
                };

                const closeModal = () => {
                    isModalOpen.value = false;
                };

                const handleHeroError = (e) => {
                    const nextIndex = heroFallbackIndex + 1;
                    if (nextIndex < fallbackImages.length) {
                        heroFallbackIndex = nextIndex;
                        heroImageSrc.value = fallbackImages[heroFallbackIndex];
                    } else {
                        // Ultimate fallback: transparent or placeholder
                        e.target.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25' viewBox='0 0 800 400'%3E%3Crect fill='%23e2e8f0' width='800' height='400'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='24' fill='%2364748b'%3EImage Unavailable%3C/text%3E%3C/svg%3E";
                    }
                };

                const handleItemImageError = (e, item) => {
                    item.imageIndex = (item.imageIndex || 0) + 1;

                    // Try item's own fallback list first
                    if (item.images && item.imageIndex < item.images.length) {
                        item.currentImage = item.images[item.imageIndex];
                    }
                    // Then try global fallback list
                    else {
                        const globalIndex = item.imageIndex - (item.images ? item.images.length : 0);
                        if (globalIndex < fallbackImages.length) {
                            item.currentImage = fallbackImages[globalIndex];
                        } else {
                            // Ultimate fallback
                            e.target.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25' viewBox='0 0 800 600'%3E%3Crect fill='%23e2e8f0' width='800' height='600'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='sans-serif' font-size='20' fill='%2364748b'%3ENo Image%3C/text%3E%3C/svg%3E";
                        }
                    }
                };

                // Lifecycle
                onMounted(() => {
                    lucide.createIcons();
                });

                onUpdated(() => {
                    lucide.createIcons();
                });

                return {
                    currentTab,
                    mainContent,
                    switchTab,
                    itinerary,
                    isModalOpen,
                    selectedItem,
                    openModal,
                    closeModal,
                    heroImageSrc,
                    handleHeroError,
                    handleItemImageError
                };
            }
        };

        createApp(defaultApp).mount('#app');
    </script>
</body>

</html>